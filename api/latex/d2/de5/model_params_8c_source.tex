\doxysection{model\+Params.\+c}
\label{model_params_8c_source}\index{modelParams.c@{modelParams.c}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}exitCodes.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}modelParams.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}util.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{//\ Private/helper\ functions:\ not\ defined\ in\ modelParams.h}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{//\ return\ 1\ if\ all\ maxParams\ parameters\ have\ been\ initialized,\ 0\ if\ not}}
\DoxyCodeLine{00012\ \textcolor{keywordtype}{int}\ allParamsInitialized(ModelParams\ *ModelParams)\ \{}
\DoxyCodeLine{00013\ \ \ \textcolor{keywordflow}{if}\ (ModelParams-\/>numParams\ ==\ ModelParams-\/>maxParams)\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{comment}{//\ all\ parameters\ have\ been\ initialized}}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00016\ \ \ \}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00019\ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{comment}{//\ Set\ array[0..length-\/1]\ to\ all\ be\ equal\ to\ value}}
\DoxyCodeLine{00022\ \textcolor{keywordtype}{void}\ setAll(\textcolor{keywordtype}{double}\ *array,\ \textcolor{keywordtype}{int}\ length,\ \textcolor{keywordtype}{double}\ value)\ \{}
\DoxyCodeLine{00023\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ length;\ i++)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ array[i]\ =\ value;}
\DoxyCodeLine{00027\ \ \ \}}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{comment}{//\ Checks\ to\ make\ sure\ that\ all\ parameters\ with\ isRequired=true\ have\ been\ read}}
\DoxyCodeLine{00031\ \textcolor{comment}{//\ If\ not,\ kills\ program}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ Writes\ out\ names\ of\ all\ parameters\ that\ weren't\ read\ (even\ if\ not\ required,}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ as\ a\ warning\ message)}}
\DoxyCodeLine{00034\ \textcolor{keywordtype}{void}\ checkAllRead(ModelParams\ *ModelParams)\ \{}
\DoxyCodeLine{00035\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordtype}{int}\ okay;}
\DoxyCodeLine{00037\ \ \ OneModelParam\ *param;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ okay\ =\ 1;\ \ \textcolor{comment}{//\ so\ far\ so\ good}}
\DoxyCodeLine{00040\ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ ModelParams-\/>numParams;\ i++)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ param\ =\ \&(ModelParams-\/>params[i]);}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{if}\ (param-\/>value\ ==\ NULL)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (param-\/>isRequired)\ \{\ \ \textcolor{comment}{//\ should\ have\ been\ read\ but\ wasn't!}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ okay\ =\ 0;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}ERROR:\ Didn't\ read\ required\ parameter\ \%s\(\backslash\)n"{}},\ param-\/>name);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ Didn't\ read\ parameter\ \%s\ (not\ flagged\ as\ required,\ so\ "{}}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}continuing)\(\backslash\)n"{}},}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ param-\/>name);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{keywordflow}{if}\ (!okay)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ exit(1);}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{comment}{/*************************************************/}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{comment}{//\ Public\ functions:\ defined\ in\ ModelParams.h}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{comment}{//\ allocate\ space\ for\ a\ new\ ModelParams\ structure,\ return\ a\ pointer\ to\ it}}
\DoxyCodeLine{00064\ ModelParams\ *newModelParams(\textcolor{keywordtype}{int}\ maxParams)\ \{}
\DoxyCodeLine{00065\ \ \ ModelParams\ *modelParams;}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ modelParams\ =\ (ModelParams\ *)malloc(\textcolor{keyword}{sizeof}(ModelParams));}
\DoxyCodeLine{00068\ \ \ modelParams-\/>maxParams\ =\ maxParams;}
\DoxyCodeLine{00069\ \ \ modelParams-\/>numParams\ =\ 0;\ \ \textcolor{comment}{//\ for\ now,\ anyway}}
\DoxyCodeLine{00070\ \ \ modelParams-\/>numParamsRead\ =\ 0;\ \ \textcolor{comment}{//\ for\ now,\ anyway}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ allocate\ space\ for\ vectors\ within\ this\ structure:}}
\DoxyCodeLine{00073\ \ \ modelParams-\/>params\ =}
\DoxyCodeLine{00074\ \ \ \ \ \ \ (OneModelParam\ *)malloc(maxParams\ *\ \textcolor{keyword}{sizeof}(OneModelParam));}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ Allocate\ enough\ space\ for\ reading\ all\ params}}
\DoxyCodeLine{00076\ \ \ modelParams-\/>readIndices\ =\ (\textcolor{keywordtype}{int}\ *)malloc(maxParams\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \textcolor{keywordflow}{return}\ modelParams;}
\DoxyCodeLine{00079\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{keywordtype}{void}\ initializeOneModelParam(ModelParams\ *modelParams,\ \textcolor{keywordtype}{char}\ *name,}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ *externalLoc,\ \textcolor{keywordtype}{int}\ isRequired)\ \{}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{int}\ paramIndex;\ \ \textcolor{comment}{//\ index\ of\ next\ uninitialized\ parameter}}
\DoxyCodeLine{00084\ \ \ OneModelParam\ *param;\ \ \textcolor{comment}{//\ a\ pointer\ to\ the\ next\ uninitialized\ parameter}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \textcolor{keywordflow}{if}\ (allParamsInitialized(modelParams))\ \{\ \ \textcolor{comment}{//\ all\ parameters\ have\ been}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ initialized!}}
\DoxyCodeLine{00088\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error\ trying\ to\ initialize\ \%s:\ have\ already\ initialized\ all\ \%d\ "{}}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}parameters\(\backslash\)n"{}},}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ name,\ modelParams-\/>maxParams);}
\DoxyCodeLine{00091\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Check\ value\ of\ maxParams\ passed\ into\ newModelParams\ function\(\backslash\)n"{}});}
\DoxyCodeLine{00092\ \ \ \ \ exit(1);}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \textcolor{comment}{//\ otherwise,\ get\ the\ index\ of\ the\ next\ uninitialized\ parameter}}
\DoxyCodeLine{00096\ \ \ paramIndex\ =\ modelParams-\/>numParams;}
\DoxyCodeLine{00097\ \ \ \textcolor{comment}{//\ and\ set\ param\ to\ point\ to\ it\ for\ easier\ access}}
\DoxyCodeLine{00098\ \ \ param\ =\ \&(modelParams-\/>params[paramIndex]);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ strcpy(param-\/>name,\ name);}
\DoxyCodeLine{00101\ \ \ param-\/>value\ =\ externalLoc;}
\DoxyCodeLine{00102\ \ \ param-\/>isRequired\ =\ isRequired;}
\DoxyCodeLine{00103\ \ \ param-\/>isRead\ =\ 0;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ modelParams-\/>numParams++;}
\DoxyCodeLine{00106\ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{void}\ checkParamFormat(\textcolor{keywordtype}{char}\ *line,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *sep)\ \{}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordtype}{int}\ numParams\ =\ countFields(line,\ sep);}
\DoxyCodeLine{00110\ \ \ \textcolor{keywordflow}{if}\ (numParams\ >\ 2)\ \{}
\DoxyCodeLine{00111\ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ extra\ columns\ in\ .param\ file\ are\ being\ ignored\ (found\ \%d\ "{}}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}columns)\(\backslash\)n"{}},}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ numParams);}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keywordtype}{void}\ readModelParams(ModelParams\ *modelParams,\ FILE\ *paramFile)\ \{}
\DoxyCodeLine{00118\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *SEPARATORS\ =\ \textcolor{stringliteral}{"{}\ \(\backslash\)t\(\backslash\)n\(\backslash\)r"{}};\ \ \textcolor{comment}{//\ characters\ that\ can\ separate\ values\ in}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ parameter\ files}}
\DoxyCodeLine{00120\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *COMMENT\_CHARS\ =\ \textcolor{stringliteral}{"{}!"{}};\ \ \textcolor{comment}{//\ comment\ characters\ (ignore\ everything}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ after\ this\ on\ a\ line)}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \textcolor{keywordtype}{char}\ line[256];}
\DoxyCodeLine{00124\ \ \ \textcolor{keywordtype}{char}\ pName[MODEL\_PARAM\_MAXNAME];\ \ \textcolor{comment}{//\ parameter\ name}}
\DoxyCodeLine{00125\ \ \ \textcolor{keywordtype}{int}\ paramIndex;}
\DoxyCodeLine{00126\ \ \ OneModelParam\ *param;\ \ \textcolor{comment}{//\ a\ pointer\ to\ a\ single\ parameter,\ for\ easier\ access}}
\DoxyCodeLine{00127\ \ \ \textcolor{keywordtype}{char}\ strValue[32];\ \ \textcolor{comment}{//\ before\ we\ know\ whether\ value\ is\ a\ number\ or\ "{}*"{}}}
\DoxyCodeLine{00128\ \ \ \textcolor{keywordtype}{double}\ value;}
\DoxyCodeLine{00129\ \ \ \textcolor{keywordtype}{char}\ *errc;}
\DoxyCodeLine{00130\ \ \ \textcolor{keywordtype}{int}\ isComment;}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \textcolor{comment}{//\ Check\ for\ old-\/style\ (spatial\ param)\ format\ on\ first\ line\ containing\ params}}
\DoxyCodeLine{00133\ \ \ \textcolor{keywordtype}{int}\ formatChecked\ =\ 0;}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \textcolor{keywordflow}{while}\ (fgets(line,\ \textcolor{keyword}{sizeof}(line),\ paramFile)\ !=\ NULL)\ \{\ \ \textcolor{comment}{//\ while\ not\ EOF\ or}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ error}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ remove\ trailing\ comments:}}
\DoxyCodeLine{00138\ \ \ \ \ isComment\ =\ stripComment(line,\ COMMENT\_CHARS);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{if}\ (!isComment)\ \{\ \ \textcolor{comment}{//\ if\ this\ isn't\ just\ a\ comment\ line\ or\ blank\ line}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ for\ old\ spatial-\/param\ format\ and\ warn\ if\ appropriate}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!formatChecked)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ checkParamFormat(line,\ SEPARATORS);}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ formatChecked\ =\ 1;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \textcolor{comment}{//\ tokenize\ line:}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ strcpy(pName,\ strtok(line,\ SEPARATORS));\ \ \textcolor{comment}{//\ copy\ first\ token\ into\ pName}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ strcpy(strValue,\ strtok(NULL,\ SEPARATORS));}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strcmp(strValue,\ \textcolor{stringliteral}{"{}*"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ used\ to\ mean\ "{}spatially\ varying"{}\ when\ sipnet\ supported\ multiple}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sites,\ but\ now\ this\ is\ an\ error}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error\ reading\ parameter\ \%s;\ '*'\ is\ no\ longer\ supported\(\backslash\)n"{}},}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pName);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ exit(EXIT\_CODE\_BAD\_PARAMETER\_VALUE);}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ value\ =\ strtod(strValue,\ \&errc);}
\DoxyCodeLine{00160\ \ \ \ \ \ \ paramIndex\ =\ locateParam(modelParams,\ pName);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (paramIndex\ ==\ -\/1)\ \{\ \ \textcolor{comment}{//\ not\ found}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ Ignoring\ parameter\ \%s:\ this\ parameter\ wasn't\ "{}}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}initialized\ in\ the\ code\(\backslash\)n"{}},}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pName);}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (valueSet(modelParams,\ paramIndex))\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error\ reading\ parameter\ file:\ read\ \%s,\ but\ this\ parameter\ has\ "{}}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}already\ been\ set\(\backslash\)n"{}},}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pName);}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ exit(EXIT\_CODE\_INPUT\_FILE\_ERROR);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \textcolor{comment}{//\ otherwise,\ we're\ good\ to\ go}}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\ param\ to\ point\ to\ the\ appropriate\ parameter,\ for\ easier\ access}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ param\ =\ \&(modelParams-\/>params[paramIndex]);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ *(param-\/>value)\ =\ value;}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ param-\/>isRead\ =\ 1;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ mark\ this\ as\ the\ next\ parameter\ read\ from\ file:}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ modelParams-\/>readIndices[modelParams-\/>numParamsRead]\ =\ paramIndex;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ modelParams-\/>numParamsRead++;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \}\ \ \textcolor{comment}{//\ else\ (no\ errors\ in\ reading\ this\ line\ from\ parameter\ file)}}
\DoxyCodeLine{00180\ \ \ \ \ \}\ \ \textcolor{comment}{//\ if\ !isComment}}
\DoxyCodeLine{00181\ \ \ \}\ \ \textcolor{comment}{//\ while\ not\ EOF\ or\ error}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{comment}{//\ check\ for\ error\ in\ reading:}}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordflow}{if}\ (ferror(paramFile))\ \{}
\DoxyCodeLine{00185\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error\ reading\ file\ in\ readModelParams\(\backslash\)n"{}});}
\DoxyCodeLine{00186\ \ \ \ \ printf(\textcolor{stringliteral}{"{}ferror\ =\ \%d\(\backslash\)n"{}},\ ferror(paramFile));}
\DoxyCodeLine{00187\ \ \ \ \ exit(1);}
\DoxyCodeLine{00188\ \ \ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ checkAllRead(modelParams);\ \ \textcolor{comment}{//\ terminate\ program\ if\ some\ required\ parameters}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ weren't\ read}}
\DoxyCodeLine{00192\ \}\ \ \textcolor{comment}{//\ readModelParams}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \textcolor{comment}{//\ Return\ numParams,\ the\ actual\ number\ of\ parameters\ that\ have\ been}}
\DoxyCodeLine{00195\ \textcolor{comment}{//\ initialized\ with\ initializeOneModelParam}}
\DoxyCodeLine{00196\ \textcolor{keywordtype}{int}\ getnumParams(ModelParams\ *modelParams)\ \{\ \textcolor{keywordflow}{return}\ modelParams-\/>numParams;\ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \textcolor{comment}{//\ Return\ number\ of\ parameters\ that\ have\ been\ read\ in\ from\ file}}
\DoxyCodeLine{00199\ \textcolor{keywordtype}{int}\ getNumParamsRead(ModelParams\ *modelParams)\ \{}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{return}\ modelParams-\/>numParamsRead;}
\DoxyCodeLine{00201\ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \textcolor{comment}{//\ Find\ parameter\ with\ given\ name\ in\ the\ parameters\ vector}}
\DoxyCodeLine{00204\ \textcolor{comment}{//\ If\ found,\ return\ index\ in\ vector,\ otherwise\ return\ -\/1}}
\DoxyCodeLine{00205\ \textcolor{keywordtype}{int}\ locateParam(ModelParams\ *modelParams,\ \textcolor{keywordtype}{char}\ *name)\ \{}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00207\ \ \ \textcolor{keywordtype}{int}\ found;}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ i\ =\ 0;}
\DoxyCodeLine{00210\ \ \ found\ =\ 0;}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordflow}{while}\ (i\ <\ modelParams-\/>numParams\ \&\&\ !found)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordflow}{if}\ (strcmpIgnoreCase(name,\ modelParams-\/>params[i].name)\ ==\ 0)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ found\ =\ 1;}
\DoxyCodeLine{00214\ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ i++;}
\DoxyCodeLine{00216\ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{keywordflow}{if}\ (found)\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordflow}{return}\ (i\ -\/\ 1);}
\DoxyCodeLine{00220\ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \textcolor{comment}{//\ Return\ 1\ if\ parameter\ i\ has\ had\ its\ value\ set,\ 0\ otherwise}}
\DoxyCodeLine{00226\ \textcolor{keywordtype}{int}\ valueSet(ModelParams\ *modelParams,\ \textcolor{keywordtype}{int}\ i)\ \{}
\DoxyCodeLine{00227\ \ \ \textcolor{keywordflow}{return}\ modelParams-\/>params[i].isRead;}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{keywordtype}{void}\ deleteModelParams(ModelParams\ *modelParams)\ \{}
\DoxyCodeLine{00231\ \ \ \textcolor{comment}{//\ Free\ space\ used\ by\ ModelParams\ structure\ itself:}}
\DoxyCodeLine{00232\ \ \ free(modelParams-\/>params);}
\DoxyCodeLine{00233\ \ \ free(modelParams-\/>readIndices);}
\DoxyCodeLine{00234\ \ \ free(modelParams);}
\DoxyCodeLine{00235\ \}}

\end{DoxyCode}
